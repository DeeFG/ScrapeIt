<!DOCTYPE html>
<html lang="en">

<head>

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css">
    <title>Scrape Articles</title>
</head>
<body>
    <container>
        <div class="jumbotron">
            <button>Saved Articles</button>
            <button>Get Artices</button>
        </div>
        <div class="row">
            <div class="col-md-12 jumbotron"> Fake News Scrapeing
                <div class="" id="time"></div>
            </div>
        </div>
        <div class="row">
            <div class="col s12 ">
                <div> https://www.tmz.com/</div>
                <div>Article title= .article__header-title </div>
                <div>Summary = section 1st p tag </div>
                <div>URL = .article__header a href </div>
                <div>image = .img-fluid img-aspect-auto </div>
            </div>
        </div>
        <br><br>
        <div class="row">
            <div class="col s12">
                <table class="table">

                    <thead>
                        <tr>
                            <th scope="col"></th>
                            <th scope="col">Train </th>
                            <th scope="col">summary </th>
                            <th scope="col">Frequency</th>
                            <th scope="col">Next Arrival</th>
                            <th scope="col">Minutes Away</th>
                        </tr>

                        <tr>
                            <th scope="col"><i class="material-icons"></i></th>
                            <th scope="col"><i class="material-icons">train</i></th>
                            <th scope="col"><i class="material-icons">location_on</i> </th>
                            <th scope="col"><i class="material-icons">timer</i></th>
                            <th scope="col"><i class="material-icons">next_week</i></th>
                            <th scope="col"><i class="material-icons">timelapse</i></th>
                        </tr>
                    </thead>
                    <tbody id="articleSection">


                    </tbody>
                </table>
            </div>
        </div>






    </container>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>
    <script scr=""></script>

    <script>

        $(document).ready(function () {
            var articleHeaderTitle = "";
            var summary = "";
            var urlLink = "";
            var imageLink = "";
            var currentTime = moment().format('LL LT');
            $("#time").append(currentTime);
            $("#submit").on("click", function (event) {
                event.preventDefault();
                //take input and get its value
                articleHeaderTitle = $("#articleHeaderTitle").val().trim();
                summary = $("#summary").val().trim();
                imageLink = $("#imageLink").val().trim();
                urlLink = $("#urlLink").val().trim();
                console.log(articleHeaderTitle);
                console.log(summary);
                console.log(imageLink);
                console.log(urlLink);
               

                // database.ref().orderByChild("dateAdded").limitToLast(5).on("child_added", function (snapshot) {
                    var data = snapshot.val();
                    var convertTime = moment(urlLink, "hh:mm").subtract(1, "years");
                    console.log(convertTime);
                    var currentTime = moment().format('MMMM Do YYYY, h:mm:ss a');
                    console.log("Current Time: " + moment(currentTime).format("hh:mm"));
                    //$("#time").append(currentTime);
                    var timeDiff = moment().diff(moment(urlLink, "h:mm:ss a"));
                    console.log("Time difference:" + timeDiff);
                    // $("#articleSection").append(timeDiff);
                    var timeRemaining = timeDiff % imageLink;
                    console.log(timeRemaining);
                    // $("#articleSection").append(timeRemaining);
                    var mintoNext = imageLink - timeRemaining;
                    console.log("Minutes until next trian: " + mintoNext);
                    //$("#articleSection").append(mintoNext);
                    var nextTrain = moment().add(mintoNext, "minutes");
                    console.log("arrival time: " + moment(nextTrain).format("hh:mm"))
                    // $("#articleSection").append(nextTrain);
                    console.log(snapshot.val().articleHeaderTitle);
                    console.log(snapshot.val().summary);
                    // console.log(snapshot.val().urlLink);
                    console.log(snapshot.val().imageLink);
                    var articleInfo =
                        `<tr>   <td class="collection-item avatar"> <i class="material-icons">train</i></td>
                        <td> ${data.articleHeaderTitle} </td> 
                        <td> ${data.summary} </td> 
                        <td> ${data.imageLink} </td> 
</tr>`;
                    $("#articleSection").append(articleInfo);
                // });
            });
        });
    </script>
</body>

</html>
